window.cisFormIsReady=!0;var formcheck=function(s){this.options=$.extend({formID:!1,formObject:!1,skey:0,sfeldID:"sfeldID",classnameDefault:"input_must",classnameNum:"input_num",classnameDate:"input_date",classnameMail:"input_mail",classnameTel:"input_tel",classnameUrl:"input_url",classnameReg:"input_reg",classnameTrue:"input_true",classnameFalse:"input_false",classnameTapFalse:"tap_false",classnameOptional:"opt",classnameBlocked:"input_blocked",outputErrorID:"FormError",onError:!1,onChecked:!1,onSuccess:!1,outputID:!1,ajaxSubmit:!0,beta:!1},s),this.status,this.errormessage,this.datepicker,this.id=this.options.formID,this.formObject=this.options.formObject,this.classnameDefault=this.options.classnameDefault,this.classnameNum=this.options.classnameNum,this.classnameDate=this.options.classnameDate,this.classnameMail=this.options.classnameMail,this.classnameTel=this.options.classnameTel,this.classnameUrl=this.options.classnameUrl,this.classnameReg=this.options.classnameReg,this.classnameTrue=this.options.classnameTrue,this.classnameFalse=this.options.classnameFalse,this.classnameTapFalse=this.options.classnameTapFalse,this.classnameOptional=this.options.classnameOptional,this.classnameBlocked=this.options.classnameBlocked,this.sessionPath=this.options.sessionPath,this.skey=this.options.skey,this.sfeldID=this.options.sfeldID,this.outputErrorID=this.options.outputErrorID,this.onError=this.options.onError,this.onChecked=this.options.onChecked,this.onSuccess=this.options.onSuccess,this.outputID=this.options.outputID,this.ajaxSubmit=this.options.ajaxSubmit,this.formObject?this.form=this.formObject:this.form=$(this.id),this.outputID||(this.outputID=$(this.form).parent("div")),this.requiredList=new Array,this.init()};formcheck.prototype={init:function(){var a,t=this;this.firstCheck=!1,$(this.form).find("label").click(function(){$(this).parent("div").find("input,select,textarea").focus()}),$(this.form).die("submit"),$(this.form).live("submit",function(s){$(this).hasClass("donotsend")||(s.preventDefault(s),clearTimeout(a),a=setTimeout(function(){t.formCheck(function(){$(t.form).addClass("donotsend formcheck_animation"),t.ajaxSubmit?t.sendByAjax()||$(t.form).removeClass("donotsend"):(t.onSuccess&&t.onSuccess(),$(t.form).submit())})},200))}),$(this.form).find("input[type='checkbox']").live("click",function(){t.firstCheck&&t.formCheck()}),$(this.form).find("input,select,textarea").live("keyup change",function(){t.firstCheck&&t.formCheck()}),$(this.form).find("input[data-type='datepicker']").length&&this.setDatePicker(),$(this.form).find("select[data-required]").each(function(s,a){if(""!=$(a).attr("data-required")){var e=$(a).attr("data-required").split(",");$(e).each(function(s,a){-1==$.inArray(a,t.requiredList)&&t.requiredList.push(a)})}})},formCheck:function(s){var n=this,a=$(this.form);return this.status=!0,this.firstCheck=!0,this.errormessage=new Array,this.isRequired(),this.isEqual(),a.find(".checkboxCheck."+n.classnameDefault).each(function(s,a){var e=$(a);if(e.removeClass(n.classnameTrue),e.removeClass(n.classnameFalse),!e.hasClass("donotcheck")){var t=e.find("input").not(".donotcheck");if(!$.isEmptyObject(t[0])){var i=!1;t.each(function(s,a){a.checked?(i=!0,e.addClass(n.classnameTrue).removeClass(n.classnameFalse)):i||e.removeClass(n.classnameTrue).addClass(n.classnameFalse)}),i||(n.status=!1)}}}),a.find("input:not([type=checkbox]):not([type=radio]),select,textarea").not(".donotcheck").each(function(s,a){var e=$(this);e.removeClass(n.classnameTrue+" "+n.classnameFalse),e.is("select")&&e.parent("div.customselect").removeClass(n.classnameTrue+" "+n.classnameFalse),e.attr("name")==n.sfeldID?e.val()!=n.skey?(e.addClass(n.classnameFalse),n.status=!1,n.errormessage.push("Spamfilter")):e.addClass(n.classnameTrue):(e.hasClass(n.classnameDefault)&&(""==e.val()||null==e.val()?(e.addClass(n.classnameFalse),e.is("select")&&e.parent("div.customselect").addClass(n.classnameFalse),n.status=!1,n.errormessage.push(e.attr("name"))):(e.addClass(n.classnameTrue),e.is("select")&&e.parent("div.customselect").addClass(n.classnameTrue))),n.isOpt(this)&&""==e.val()?e.addClass(n.classnameTrue):(e.hasClass(n.classnameNum)?isNaN(e.val())||""==e.val()||" "==e.val()?(e.addClass(n.classnameFalse),n.status=!1,n.errormessage.push(e.attr("name"))):e.addClass(n.classnameTrue):e.hasClass(n.classnameMail)?n.isEmail(e.val())?e.addClass(n.classnameTrue):(e.addClass(n.classnameFalse),n.status=!1,n.errormessage.push(e.attr("name"))):e.hasClass(n.classnameDate)?n.isDate(e.val())?e.addClass(n.classnameTrue):(e.addClass(n.classnameFalse),n.status=!1,n.errormessage.push(e.attr("name"))):e.hasClass(n.classnameTel)?n.isTel(e.val())?e.addClass(n.classnameTrue):(e.addClass(n.classnameFalse),n.status=!1,n.errormessage.push(e.attr("name"))):e.hasClass(n.classnameUrl)&&(n.isUrl(e.val())?e.addClass(n.classnameTrue):(e.addClass(n.classnameFalse),n.status=!1,n.errormessage.push(e.attr("name")))),e.hasClass(n.classnameReg)&&(n.regExpCheck(e.attr("data-reg"),e.val())?e.addClass(n.classnameTrue):(e.addClass(n.classnameFalse),n.status=!1,n.errormessage.push(e.attr("name"))))),e.hasClass(n.classnameBlocked)&&(e.removeClass(n.classnameTrue).addClass(n.classnameFalse),n.status=!1))}),this.tabCheck(),this.accordionCheck(),this.fileuploadCheck(),this.onChecked&&this.onChecked(),this.status&&s&&s(),!this.status&&this.onError&&this.onError(),this.status},tabCheck:function(){var t=this,s=$(this.form),i=s.closest(".tabbable");void 0===$(i)[0]&&void 0===s.find(".tabbable")[0]||(void 0===$(i)[0]&&(i=s.find(".tabbable")),$(i).find(".nav-tabs li").each(function(s,a){var e=$(a);e.removeClass(t.classnameTapFalse),0<$(i).find($.trim(e.children("a").attr("href"))).find("."+t.classnameFalse).length&&e.addClass(t.classnameTapFalse)}),s.find("##tabs li").each(function(s,a){var e=$(a);e.removeClass(t.classnameTapFalse),0<$(t.form).find($.trim(e.children("a").attr("href"))).find("."+t.classnameFalse).length&&e.addClass(t.classnameTapFalse)}))},accordionCheck:function(){var t=this;$(t.form).find(".accordion .accordion-group").each(function(s,a){var e=$(a);e.removeClass(t.classnameFalse),0<e.find(e.find("a.accordion-toggle").attr("href")).find("."+t.classnameFalse).length&&e.addClass(t.classnameFalse)})},fileuploadCheck:function(){var e=this,s=$(this.form),a=s.closest(".tabbable");0==$(a).length&&(a=s.find(".tabbable")),$(a).find(".fileupload input[type=file]").each(function(s,a){$(a).closest(".input-append").find(".uneditable-input").removeClass(e.classnameFalse),$(a).hasClass(e.classnameFalse)&&$(a).closest(".input-append").find(".uneditable-input").addClass(e.classnameFalse)})},isEmail:function(s){return this.regExpCheck(/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,s)},isDate:function(s){return this.regExpCheck(/^\d{1,2}\.\d{1,2}\.\d{4}$/,s)},isTel:function(s){return this.regExpCheck("^((\\+|00)[1-9]\\d{0,3}|0 ?[1-9]|\\(00? ?[1-9][\\d ]*\\))[\\d\\-/ ]*$",s)},isUrl:function(s){return this.regExpCheck("^(ftp|http|https)://(www.|[a-zA-Z0-9]{3,}|)+([a-zA-Z0-9-_]{3,}(.+[a-zA-Z0-9-_]{2,4})+)?(((/{1}[a-zA-Z_=-]+)*/?)?)$",s)},regExpCheck:function(s,a){return new RegExp(s).test(a)},isOpt:function(s){return $(s).hasClass(this.classnameOptional)},isRequired:function(){var e=this,t="";$(this.form).find("select[data-required] option:selected").each(function(s,a){var e=$(a);""!=e.attr("data-required")&&void 0!==e.attr("data-required")&&""!=$(this).val()&&(t+=e.attr("data-required")+",")});var s=t.split(","),i=new Array;$.each(s,function(s,a){-1==$.inArray(a,i)&&""!=a&&i.push(a)}),$(this.requiredList).each(function(s,a){$(i).length&&($(a).addClass("donotcheck"),$(a).removeClass(e.classnameFalse),-1<$.inArray(a,i)&&$(a).removeClass("donotcheck"))})},isEqual:function(){var t=this;$(this.form).find("[data-equal]").each(function(s,a){var e=$($(this).attr("data-equal"));$(this).val()!=$(e).val()?($(e,this).addClass(t.classnameFalse+" donotcheck"),t.status=!1):$(e,this).removeClass("donotcheck")})},sendByAjax:function(){var a=this,e=$(this.form);$(a.form).attr("action");$.ajax({type:"POST",url:e.attr("action")+"&skipfurl=1",data:e.serialize(),cache:!1,success:function(s){return 0==$(s).filter(".error").length?($(a.outputID).html(s),a.onSuccess&&a.onSuccess(),e.removeClass("formcheck_animation"),!0):($("#"+a.outputErrorID).hide().html($(s).filter(".error").html()).show(),e.removeClass("formcheck_animation"),!1)}})},setDatePicker:function(){var i=$.extend({currentText:"Heute",todayText:"Heute",clearText:"-",defaultView:"agendaDay",closeText:"Schliessen",monthNames:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthNamesShort:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayNamesShort:["So","Mo","Di","Mi","Do","Fr","Sa"],dayNamesMin:["So","Mo","Di","Mi","Do","Fr","Sa"],showMonthAfterYear:!1,showOn:"focus",dateFormat:"dd.mm.yy",date:!1},this.options);$.datepicker.setDefaults(i),$(this.form).find("input[data-type='datepicker']").each(function(s,a){var e=$(a),t="#"+e.attr("id");i.date[t]?e.datepicker(i.date[t]):e.datepicker()})},beta:function(s){if(this.options.beta){console.log("--- BETA AKTIV ---");try{return s&&s(),"Successful"}catch(s){var a="\n- There was an error on this page.\n";return a+="- Error description: "+s.message+"\n",console.log(a),console.log("--- BETA END ---"),a}}}};